{% extends "_layout.html" %}

{% block title %}KPI Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="header-section">
        <h1>KPI Dashboard</h1>
        <div id="timeframe-chips" class="timeframe-selector">
            <button class="chip active" data-timeframe="1D">1D</button>
            <button class="chip" data-timeframe="5D">5D</button>
            <button class="chip" data-timeframe="10D">10D</button>
            <button class="chip" data-timeframe="30D">30D</button>
        </div>
    </div>

    <div id="kpi-cards" class="kpi-grid">
        <div class="kpi-card">
            <h3>Portfolio Value</h3>
            <div class="kpi-value" id="portfolio-value">$525,000</div>
            <div class="kpi-change positive">+2.3%</div>
        </div>

        <div class="kpi-card">
            <h3>Day P&L</h3>
            <div class="kpi-value" id="day-pnl">$2,350</div>
            <div class="kpi-change positive">+0.45%</div>
        </div>

        <div class="kpi-card">
            <h3>Active Positions</h3>
            <div class="kpi-value" id="active-positions">15</div>
            <div class="kpi-change neutral">75% win rate</div>
        </div>

        <div class="kpi-card">
            <h3>Alerts</h3>
            <div class="kpi-value" id="alerts-count">3</div>
            <div class="kpi-change warning">2 new</div>
        </div>

        <div class="kpi-card">
            <h3>Sharpe Ratio</h3>
            <div class="kpi-value" id="sharpe-ratio">1.25</div>
            <div class="kpi-change positive">Good</div>
        </div>

        <div class="kpi-card">
            <h3>Max Drawdown</h3>
            <div class="kpi-value" id="max-drawdown">-2.1%</div>
            <div class="kpi-change positive">Low risk</div>
        </div>
    </div>

    <div class="insights-section">
        <div class="section-header">
            <h2>Pinned Rollup | Alerts | Agent Insights</h2>
        </div>
        <div class="insights-content">
            <div class="insight-item">üìå 5 pinned stocks tracking well</div>
            <div class="insight-item">üö® TCS approaching resistance level</div>
            <div class="insight-item">ü§ñ AI recommends rebalancing energy sector</div>
        </div>
    </div>

    <div class="signals-section">
        <h2>Top Signals</h2>
        <table id="top-signals-table" class="signals-table">
            <thead>
                <tr>
                    <th>Symbol</th>
                    <th>Signal</th>
                    <th>Confidence</th>
                    <th>Price</th>
                    <th>Target</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="signals-body">
                <tr>
                    <td>TCS</td>
                    <td><span class="signal buy">BUY</span></td>
                    <td>85%</td>
                    <td>‚Çπ3,950</td>
                    <td>‚Çπ4,200</td>
                    <td>
                        <button class="pin-btn">‚≠ê</button>
                        <button class="lock-btn">üîí</button>
                    </td>
                </tr>
                <tr>
                    <td>RELIANCE</td>
                    <td><span class="signal hold">HOLD</span></td>
                    <td>72%</td>
                    <td>‚Çπ2,450</td>
                    <td>‚Çπ2,600</td>
                    <td>
                        <button class="pin-btn">‚≠ê</button>
                        <button class="lock-btn">üîí</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script src="/static/js/dashboard.js"></script>
{% endblock %}